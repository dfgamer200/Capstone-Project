{% extends "base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'css/login.css' %}">

<div class="login-container">
  <h2>Login</h2>

  <form method="post" action="{% url 'mechanix:login' %}">
    {% csrf_token %}
    {% if form.errors %}
      <p class="error">Invalid username or password.</p>
    {% endif %}

    <!-- Important: preserve ?next for smart redirect -->
    <input type="hidden" name="next" value="{{ next }}">

    <label for="id_username">Username:</label><br>
    <input type="text" name="username" id="id_username" required><br><br>

    <label for="id_password">Password:</label><br>
    <input type="password" name="password" id="id_password" required><br><br>

    <button type="submit">Log In</button>
  </form>

  <p>Don't have an account? <a href="{% url 'mechanix:signup' %}">Sign up here</a>.</p>

  <p><a href="{% url 'mechanix:welcome' %}">Back to Welcome</a></p>
</div>

{% endblock %}
